#include "CORE.H"
#include "VRAM.H"
#include "MEMPACK.H"

#include <stddef.h>

#ifdef PC_VERSION
#pragma warning(disable: 4101)
#endif

struct _BlockVramEntry* openVramBlocks; // offset 0x800D482C
struct _BlockVramEntry* usedVramBlocks; // offset 0x800D4828
struct _BlockVramEntry vramBlockList[90]; // offset 0x800D3E2C
long numOfBlocksUsed; // offset 0x800D4808

void VRAM_InitVramBlockCache()
{ 
	int i;
	
	i = 89;

	openVramBlocks = NULL;
	usedVramBlocks = NULL;
	numOfBlocksUsed = 0;

	do
	{
		vramBlockList[i].flags = 0;

	} while (i--);

	VRAM_InsertFreeVram(SCREEN_WIDTH, SCREEN_HEIGHT + 16, SCREEN_WIDTH, SCREEN_HEIGHT + 16, 1);
	VRAM_InitMorphPalettes();
}

void VRAM_EnableTerrainArea()
{ 
	VRAM_InsertFreeVram(SCREEN_WIDTH, 0, SCREEN_WIDTH, SCREEN_HEIGHT + 16, 0);
}


// autogenerated function stub: 
// void /*$ra*/ VRAM_DisableTerrainArea()
void VRAM_DisableTerrainArea()
{ // line 189, offset 0x80072960
	/* begin block 1 */
		// Start line: 311
	/* end block 1 */
	// End Line: 312

}


// autogenerated function stub: 
// int /*$ra*/ VRAM_ConcatanateMemory(struct _BlockVramEntry *curBlock /*$s1*/)
int VRAM_ConcatanateMemory(struct _BlockVramEntry *curBlock)
{ // line 195, offset 0x8007298c
	/* begin block 1 */
		// Start line: 196
		// Start offset: 0x8007298C
		// Variables:
			struct _BlockVramEntry *nextBlock; // $s0
	/* end block 1 */
	// End offset: 0x80072B60
	// End Line: 261

	/* begin block 2 */
		// Start line: 324
	/* end block 2 */
	// End Line: 325

	return 0;
}


// autogenerated function stub: 
// void /*$ra*/ VRAM_GarbageCollect()
void VRAM_GarbageCollect()
{ // line 263, offset 0x80072b74
	/* begin block 1 */
		// Start line: 463
	/* end block 1 */
	// End Line: 464

}


// autogenerated function stub: 
// int /*$ra*/ VRAM_InsertFreeBlock(struct _BlockVramEntry *block /*$a0*/)
int VRAM_InsertFreeBlock(struct _BlockVramEntry *block)
{ // line 270, offset 0x80072ba8
	/* begin block 1 */
		// Start line: 271
		// Start offset: 0x80072BA8
		// Variables:
			struct _BlockVramEntry *next; // $v1
			struct _BlockVramEntry *prev; // $a1
	/* end block 1 */
	// End offset: 0x80072C28
	// End Line: 301

	/* begin block 2 */
		// Start line: 478
	/* end block 2 */
	// End Line: 479

	return 0;
}


// autogenerated function stub: 
// void /*$ra*/ VRAM_DeleteFreeBlock(struct _BlockVramEntry *block /*$a0*/)
void VRAM_DeleteFreeBlock(struct _BlockVramEntry *block)
{ // line 304, offset 0x80072c38
	/* begin block 1 */
		// Start line: 306
		// Start offset: 0x80072C38
		// Variables:
			struct _BlockVramEntry *next; // $v1
			struct _BlockVramEntry *prev; // $a1
	/* end block 1 */
	// End offset: 0x80072C98
	// End Line: 330

	/* begin block 2 */
		// Start line: 547
	/* end block 2 */
	// End Line: 548

	/* begin block 3 */
		// Start line: 548
	/* end block 3 */
	// End Line: 549

	/* begin block 4 */
		// Start line: 549
	/* end block 4 */
	// End Line: 550

}


// autogenerated function stub: 
// void /*$ra*/ VRAM_InsertUsedBlock(struct _BlockVramEntry *block /*$a0*/)
void VRAM_InsertUsedBlock(struct _BlockVramEntry *block)
{ // line 333, offset 0x80072ca0
	/* begin block 1 */
		// Start line: 605
	/* end block 1 */
	// End Line: 606

	/* begin block 2 */
		// Start line: 606
	/* end block 2 */
	// End Line: 607

}


// autogenerated function stub: 
// void /*$ra*/ VRAM_DeleteUsedBlock(struct _BlockVramEntry *block /*$a0*/)
void VRAM_DeleteUsedBlock(struct _BlockVramEntry *block)
{ // line 349, offset 0x80072cd4
	/* begin block 1 */
		// Start line: 351
		// Start offset: 0x80072CD4
		// Variables:
			struct _BlockVramEntry *next; // $v1
			struct _BlockVramEntry *prev; // $a1
	/* end block 1 */
	// End offset: 0x80072D30
	// End Line: 372

	/* begin block 2 */
		// Start line: 637
	/* end block 2 */
	// End Line: 638

	/* begin block 3 */
		// Start line: 638
	/* end block 3 */
	// End Line: 639

	/* begin block 4 */
		// Start line: 640
	/* end block 4 */
	// End Line: 641

}


// autogenerated function stub: 
// struct _BlockVramEntry * /*$ra*/ VRAM_GetOpenBlock()
struct _BlockVramEntry * VRAM_GetOpenBlock()
{ // line 374, offset 0x80072d38
	/* begin block 1 */
		// Start line: 376
		// Start offset: 0x80072D38
		// Variables:
			int i; // $a0
	/* end block 1 */
	// End offset: 0x80072D64
	// End Line: 389

	/* begin block 2 */
		// Start line: 689
	/* end block 2 */
	// End Line: 690

	/* begin block 3 */
		// Start line: 690
	/* end block 3 */
	// End Line: 691

	/* begin block 4 */
		// Start line: 692
	/* end block 4 */
	// End Line: 693

	return null;
}


// autogenerated function stub: 
// int /*$ra*/ VRAM_DeleteFreeVram(short x /*$a0*/, short y /*$a1*/, short w /*$a2*/, short h /*$a3*/)
int VRAM_DeleteFreeVram(short x, short y, short w, short h)
{ // line 391, offset 0x80072d6c
	/* begin block 1 */
		// Start line: 392
		// Start offset: 0x80072D6C
		// Variables:
			struct _BlockVramEntry *prev; // $t1
			struct _BlockVramEntry *vblock; // $a2
			struct _BlockVramEntry *nextVBlock; // $t0
			struct _BlockVramEntry (*blockLists[2]); // stack offset -24
			int i; // $t2
			int delCount; // $t3
	/* end block 1 */
	// End offset: 0x80072E88
	// End Line: 427

	/* begin block 2 */
		// Start line: 727
	/* end block 2 */
	// End Line: 728

	return 0;
}

int VRAM_InsertFreeVram(short x, short y, short w, short h, int flags)
{
	struct _BlockVramEntry* useBlock;

	if ((w & 0x3F) && (64 - (w & 0x3F)) < w)
	{

		useBlock = VRAM_GetOpenBlock();

		useBlock->w = 64 - (w & 0x3F);
		useBlock->next = NULL;
		useBlock->flags = flags;
		useBlock->time = 0;
		useBlock->ID = 0;
		useBlock->x = x;
		useBlock->y = y;
		useBlock->h = h;
		useBlock->area = useBlock->w * h;

		VRAM_InsertFreeBlock(useBlock);

		useBlock = VRAM_GetOpenBlock();
		useBlock->w = (w - 64) + (w & 0x3F);
		useBlock->next = NULL;
		useBlock->flags = flags;
		useBlock->time = 0;
		useBlock->ID = 0;
		useBlock->y = y;
		useBlock->h = h;
		useBlock->x = (x - 64) - (w & 0x3F);
		useBlock->area = ((w - 64) + (w & 0x3F)) * h;

		VRAM_InsertFreeBlock(useBlock);
	}
	else
	{
		useBlock = VRAM_GetOpenBlock();

		useBlock->next = NULL;
		useBlock->flags = flags;
		useBlock->time = 0;
		useBlock->ID = 0;
		useBlock->x = x;
		useBlock->y = y;
		useBlock->w = w;
		useBlock->h = h;
		useBlock->area = w * h;

		VRAM_InsertFreeBlock(useBlock);
	}

	return 1;
}


// autogenerated function stub: 
// struct _BlockVramEntry * /*$ra*/ VRAM_CheckVramSlot(short *x /*stack 0*/, short *y /*stack 4*/, short w /*$s7*/, short h /*$s6*/, int type /*stack 16*/, int startY /*stack 20*/)
struct _BlockVramEntry* VRAM_CheckVramSlot(short* x, short* y, short w, short h, int type, int startY)
{
#if 0
	struct _BlockVramEntry* vblock; // $s1
	short hldx; // $s4
	short hldy; // $s5
	short hldw; // $s0
	short hldh; // $fp
	long fits; // $t1
	long offset; // $s0
	struct _BlockVramEntry* vblockright; // $s3
	long offsetright; // $s2
	 // line 36, offset 0x800736f4
	int newx; // $v0
 // line 50, offset 0x8007375c
 // line 55, offset 0x8007375c
	int xval; // $v0

	vblock = openVramBlocks;
	//v1 = startY
	//t6 = type
	fits = 0;
	vblockright = NULL;
	offsetright = 0;
	//s6 = w
	//s7 = h
	//arg_0 = x
	//arg_4 = y
	//var_8 = t6
	if (vblock != NULL)
	{
		//a1 = w
		//t5 = h
		//t2 = startY
		//t4 = startY + (SCREEN_HEIGHT + 16)
		//t3 = 64

		//loc_8007367C
		//t0 = vblock->w

		if ((vblock->w >= w && vblock->h >= h && startY == -1) || (vblock->y >= startY && vblock->y < startY + (SCREEN_HEIGHT + 16)))
		{
			//v1 = vblock->x
			//a2 = 64 -(vblock->x & 0x3F)
			if ((vblock->x & 0x3F) != 0)
			{

			}//loc_800738B8
		}
		//loc_80073794
	}
	//loc_800737AC

		bnez    $v0, loc_8007375C
		move    $s0, $a2
		andi    $a2, $v1, 0xF
		beqz    $a2, loc_800738B8
		li      $v0, 0x10
		subu    $s0, $v0, $a2
		sllv    $v0, $v1, $v0
		sra     $a0, $v0, 16
		addu    $v0, $a0, $s0
		andi    $v0, 0x3F
		subu    $v0, $t3, $v0
		slt     $v0, $a1
		bnez    $v0, loc_80073794
		subu    $v0, $t0, $s0
		slt     $v0, $a1
		bnez    $v0, loc_80073794
		nop
		sll     $a2, $s0, 16
		lh      $a1, 0xE($s1)
		lbu     $v0, 5($s1)
		sra     $a2, 16
		jal     sub_80073460
		sw      $v0, 0x20 + var_10($sp)
		move    $t1, $zero
		lhu     $v0, 0xC($s1)
		lhu     $v1, 0x10($s1)
		addu    $v0, $s0
		subu    $v1, $s0
		sh      $v0, 0xC($s1)
		j       loc_800737A4
		sh      $v1, 0x10($s1)

		loc_8007375C:
	sll     $v0, $v1, 16
		sra     $v0, 16
		addu    $v0, $s0
		andi    $v0, 0x3F
		subu    $v0, $t3, $v0
		slt     $v0, $a1
		bnez    $v0, loc_80073794
		subu    $v0, $t0, $s0
		slt     $v0, $a1
		bnez    $v0, loc_80073794
		nop
		li      $t1, 1
		move    $s3, $s1
		move    $s2, $s0

		loc_80073794 :
	lw      $s1, 0($s1)
		nop
		bnez    $s1, loc_8007367C
		nop

		loc_800737A4 :
	bnez    $s1, loc_80073800
		nop

		loc_800737AC :
	beqz    $s3, loc_800737F8
		li      $v0, 1
		bne     $t1, $v0, loc_800737F8
		sll     $a2, $s2, 16
		move    $s1, $s3
		lh      $a0, 0xC($s1)
		lh      $a1, 0xE($s1)
		lh      $a3, 0x12($s1)
		lbu     $v0, 5($s1)
		sra     $a2, 16
		jal     sub_80073460
		sw      $v0, 0x20 + var_10($sp)
		move    $t1, $zero
		lhu     $v0, 0xC($s1)
		lhu     $v1, 0x10($s1)
		addu    $v0, $s2
		subu    $v1, $s2
		sh      $v0, 0xC($s1)
		sh      $v1, 0x10($s1)

		loc_800737F8:
	beqz    $s1, loc_80073A0C
		move    $v0, $s1

		loc_80073800 :
	bnez    $t1, loc_80073A0C
		move    $v0, $s1
		lhu     $s4, 0xC($s1)
		lhu     $s5, 0xE($s1)
		lhu     $s0, 0x10($s1)
		lhu     $fp, 0x12($s1)
		jal     sub_800731FC
		move    $a0, $s1
		move    $a0, $s1
		li      $v0, 1
		sw      $zero, 0($s1)
		sb      $v0, 5($s1)
		lbu     $t6, 0x20 + var_8($sp)
		sh      $s6, 0x10($s1)
		sh      $s7, 0x12($s1)
		jal     sub_80073264
		sb      $t6, 4($s1)
		lhu     $v0, 0xC($s1)
		lw      $t6, 0x20 + arg_0($sp)
		nop
		sh      $v0, 0($t6)
		lhu     $v0, 0xE($s1)
		lw      $t6, 0x20 + arg_4($sp)
		nop
		sh      $v0, 0($t6)
		sll     $v0, $s0, 16
		sra     $s2, $v0, 16
		sll     $v0, $s6, 16
		sra     $s3, $v0, 16
		bne     $s2, $s3, loc_800738C0
		sll     $v0, $fp, 16
		sll     $v1, $fp, 16
		sll     $v0, $s7, 16
		beq     $v1, $v0, loc_80073A08
		li      $v0, 1
		sw      $v0, 0x20 + var_10($sp)
		sll     $a0, $s4, 16
		sra     $a0, 16
		addu    $a1, $s5, $s7
		sll     $a1, 16
		sra     $a1, 16
		move    $a2, $s3
		subu    $a3, $fp, $s7
		sll     $a3, 16
		j       loc_80073A00
		sra     $a3, 16

		loc_800738B8:
	j       loc_800737A4
		move    $t1, $zero

		loc_800738C0 :
	sra     $t0, $v0, 16
		sll     $v0, $s7, 16
		sra     $a3, $v0, 16
		bne     $t0, $a3, loc_80073904
		subu    $v1, $s2, $s3
		li      $v0, 1
		sw      $v0, 0x20 + var_10($sp)
		addu    $a0, $s4, $s6
		sll     $a0, 16
		sra     $a0, 16
		sll     $a1, $s5, 16
		sra     $a1, 16
		subu    $a2, $s0, $s6
		sll     $a2, 16
		sra     $a2, 16
		j       loc_80073A00
		move    $a3, $t0

		loc_80073904 :
	mult    $v1, $a3
		mflo    $a1
		subu    $v0, $t0, $a3
		nop
		mult    $s2, $v0
		mflo    $t1
		nop
		nop
		mult    $v1, $t0
		mflo    $a0
		nop
		nop
		mult    $s3, $v0
		subu    $v1, $a1, $t1
		bgez    $v1, loc_80073948
		nop
		negu    $v1, $v1

		loc_80073948 :
	mflo    $v0
		subu    $v0, $a0, $v0
		bgez    $v0, loc_8007395C
		nop
		negu    $v0, $v0

		loc_8007395C :
	slt     $v0, $v1
		beqz    $v0, loc_800739AC
		addu    $a0, $s4, $s6
		sll     $a0, 16
		sra     $a0, 16
		sll     $a1, $s5, 16
		sra     $a1, 16
		subu    $a2, $s0, $s6
		sll     $a2, 16
		sra     $a2, 16
		li      $s0, 1
		jal     sub_80073460
		sw      $s0, 0x20 + var_10($sp)
		sll     $a0, $s4, 16
		sra     $a0, 16
		addu    $a1, $s5, $s7
		sll     $a1, 16
		sra     $a1, 16
		j       loc_800739F0
		move    $a2, $s2

		loc_800739AC :
	sll     $a0, 16
		sra     $a0, 16
		sll     $a1, $s5, 16
		sra     $a1, 16
		subu    $a2, $s0, $s6
		sll     $a2, 16
		sra     $a2, 16
		move    $a3, $t0
		li      $s0, 1
		jal     sub_80073460
		sw      $s0, 0x20 + var_10($sp)
		sll     $a0, $s4, 16
		sra     $a0, 16
		addu    $a1, $s5, $s7
		sll     $a1, 16
		sra     $a1, 16
		move    $a2, $s3

		loc_800739F0 :
	subu    $a3, $fp, $s7
		sll     $a3, 16
		sra     $a3, 16
		sw      $s0, 0x20 + var_10($sp)

		loc_80073A00 :
		jal     sub_80073460
		nop

		loc_80073A08 :
	move    $v0, $s1

		loc_80073A0C :
	lw      $ra, 0x20 + var_s24($sp)
		lw      $fp, 0x20 + var_s20($sp)
		lw      $s7, 0x20 + var_s1C($sp)
		lw      $s6, 0x20 + var_s18($sp)
		lw      $s5, 0x20 + var_s14($sp)
		lw      $s4, 0x20 + var_s10($sp)
		lw      $s3, 0x20 + var_sC($sp)
		lw      $s2, 0x20 + var_s8($sp)
		lw      $s1, 0x20 + var_s4($sp)
		lw      $s0, 0x20 + var_s0($sp)
		jr      $ra
		addiu   $sp, 0x48
#endif

		return null;
}


// autogenerated function stub: 
// void /*$ra*/ VRAM_ClearVramBlock(struct _BlockVramEntry *block /*$s0*/)
void VRAM_ClearVramBlock(struct _BlockVramEntry *block)
{ // line 745, offset 0x8007342c
	/* begin block 1 */
		// Start line: 1593
	/* end block 1 */
	// End Line: 1594

}


// autogenerated function stub: 
// void /*$ra*/ AdjustVramCoordsObject(int oldx /*$s3*/, int oldy /*$s1*/, int newx /*$a2*/, int newy /*$t7*/, struct Object *object /*stack 16*/)
void AdjustVramCoordsObject(int oldx, int oldy, int newx, int newy, struct Object *object)
{ // line 825, offset 0x80073460
	/* begin block 1 */
		// Start line: 826
		// Start offset: 0x80073460
		// Variables:
			struct TextureMT3 *texture; // $t1
			int oldclutxoffset; // $v0
			int oldclutyoffset; // $a0
			int newclut; // $a0
			int d; // $t4
			int oldtpagexoffset; // $v1
			int oldtpageyoffset; // $v0
			int newtpage; // $a3
			struct _Model *model; // $t3
			short diffy; // $s5
			short diffx; // $s6
	/* end block 1 */
	// End offset: 0x80073628
	// End Line: 884

	/* begin block 2 */
		// Start line: 1753
	/* end block 2 */
	// End Line: 1754

}


// autogenerated function stub: 
// struct _BlockVramEntry * /*$ra*/ VRAM_InsertionSort(struct _BlockVramEntry *rootNode /*$a0*/, struct _BlockVramEntry *newBlock /*$a1*/, int pack_type /*$a2*/)
struct _BlockVramEntry * VRAM_InsertionSort(struct _BlockVramEntry *rootNode, struct _BlockVramEntry *newBlock, int pack_type)
{ // line 922, offset 0x8007364c
	struct _BlockVramEntry* result; // eax
	struct _BlockVramEntry* v4; // esi
	struct _BlockVramEntry* v5; // ecx
	__int16 w; // di
	__int16 v7; // dx

	result = rootNode;
	v4 = 0;
	v5 = rootNode;
	if (pack_type)
	{
		if (rootNode)
		{
			w = newBlock->w;
			do
			{
				v7 = v5->w;
				if (w >= v7 && (w != v7 || newBlock->h >= v5->h))
					break;
				v4 = v5;
				v5 = v5->next;
			} while (v5);
		}
	}
	else if (rootNode)
	{
		do
		{
			if (newBlock->area >= v5->area)
				break;
			v4 = v5;
			v5 = v5->next;
		} while (v5);
	}
	if (v4)
	{
		newBlock->next = v5;
		v4->next = newBlock;
	}
	else
	{
		newBlock->next = rootNode;
		return newBlock;
	}
	return result;
}


// autogenerated function stub: 
// void /*$ra*/ VRAM_ClearVram()
void VRAM_ClearVram()
{ // line 970, offset 0x80073704
	/* begin block 1 */
		// Start line: 971
		// Start offset: 0x80073704
		// Variables:
			struct _BlockVramEntry *vblock; // $a0
			struct _BlockVramEntry *next; // $s0
	/* end block 1 */
	// End offset: 0x80073730
	// End Line: 981

	/* begin block 2 */
		// Start line: 2226
	/* end block 2 */
	// End Line: 2227

	/* begin block 3 */
		// Start line: 2229
	/* end block 3 */
	// End Line: 2230

}


// autogenerated function stub: 
// struct _BlockVramEntry * /*$ra*/ VRAM_RearrangeVramsLayer(long whichLayer /*stack 0*/, short *AddX /*stack 4*/, short *AddY /*stack 8*/, short AddW /*$fp*/, int AddH /*stack 16*/, int AddType /*stack 20*/, int AddStartY /*stack 24*/)
struct _BlockVramEntry * VRAM_RearrangeVramsLayer(long whichLayer, short *AddX, short *AddY, short AddW, int AddH, int AddType, int AddStartY)
{ // line 991, offset 0x80073740
	/* begin block 1 */
		// Start line: 992
		// Start offset: 0x80073740
		// Variables:
			struct _BlockVramEntry *vblock; // $a0
			struct _BlockVramEntry *retvblock; // $s5
			struct _BlockVramEntry *sortedBlocks; // $s2
			struct _BlockVramEntry *curBlock; // $s0
			struct _BlockVramEntry (*savedVramBlocksPTR[48]); // stack offset -1624
			struct _BlockVramEntry savedVramBlocks[48]; // stack offset -1432
			PSX_RECT vramLoc; // stack offset -88
			long numBlocks; // $s3
			long d; // $s1
			int error_retry; // $s4
			int good_pack; // $s7
			int pack_type; // $s6
			short x; // stack offset -80
			short y; // stack offset -78
			short dispYPos; // stack offset -56

		/* begin block 1.1 */
			// Start line: 1052
			// Start offset: 0x80073868
			// Variables:
				int startY; // stack offset -48

			/* begin block 1.1.1 */
				// Start line: 1117
				// Start offset: 0x80073A70
				// Variables:
					int type; // $t0
			/* end block 1.1.1 */
			// End offset: 0x80073C08
			// End Line: 1217
		/* end block 1.1 */
		// End offset: 0x80073D8C
		// End Line: 1278
	/* end block 1 */
	// End offset: 0x80073D8C
	// End Line: 1281

	/* begin block 2 */
		// Start line: 2271
	/* end block 2 */
	// End Line: 2272

	/* begin block 3 */
		// Start line: 2292
	/* end block 3 */
	// End Line: 2293

	return null;
}


// autogenerated function stub: 
// void /*$ra*/ VRAM_TransferBufferToVram(void *dataPtr /*$s3*/, long dataSize /*$s2*/, short status /*$s7*/, void *data1 /*$s0*/, void *data2 /*stack 16*/)
void VRAM_TransferBufferToVram(void *dataPtr, long dataSize, short status, void *data1, void *data2)
{ // line 1315, offset 0x80073dc8
	/* begin block 1 */
		// Start line: 1316
		// Start offset: 0x80073DC8
		// Variables:
			struct VramBuffer *vramControl; // $s1
			PSX_RECT rect; // stack offset -48
			long *nextOTag; // $s5
			long *drawTimerReturn; // $fp

		/* begin block 1.1 */
			// Start line: 1345
			// Start offset: 0x80073E5C
		/* end block 1.1 */
		// End offset: 0x80073F10
		// End Line: 1374

		/* begin block 1.2 */
			// Start line: 1379
			// Start offset: 0x80073F18
		/* end block 1.2 */
		// End offset: 0x80073FBC
		// End Line: 1399

		/* begin block 1.3 */
			// Start line: 1435
			// Start offset: 0x80073FD8
		/* end block 1.3 */
		// End offset: 0x80073FEC
		// End Line: 1438
	/* end block 1 */
	// End offset: 0x80074010
	// End Line: 1450

	/* begin block 2 */
		// Start line: 2630
	/* end block 2 */
	// End Line: 2631

}


// autogenerated function stub: 
// void /*$ra*/ VRAM_LoadReturn(void *dataPtr /*$a0*/, void *data1 /*$a1*/, void *data2 /*$a2*/)
void VRAM_LoadReturn(void *dataPtr, void *data1, void *data2)
{ // line 1455, offset 0x80074040
	MEMPACK_Free((char*)data1);
}


// autogenerated function stub: 
// long /*$ra*/ VRAM_GetObjectVramSpace(struct VramSize *vramSize /*$v1*/, struct _ObjectTracker *objectTracker /*$s4*/)
long VRAM_GetObjectVramSpace(struct VramSize *vramSize, struct _ObjectTracker *objectTracker)
{ // line 1461, offset 0x80074060
	__int16 x; // cx
	__int16 h; // dx
	__int16 w; // cx
	int v5; // esi
	struct _BlockVramEntry* v6; // eax
	PSX_RECT AddX; // [esp+4h] [ebp-Ch] OVERLAPPED BYREF

	x = vramSize->x + 512;
	AddX.y = vramSize->y;
	h = vramSize->h;
	AddX.x = x;
	w = vramSize->w;
	AddX.h = h;
	AddX.w = w;
	v5 = 1;
	v6 = VRAM_CheckVramSlot(&AddX.x, &AddX.y, w, h, 2, 256);
	if (!v6)
	{
		v6 = VRAM_RearrangeVramsLayer(1, &AddX.x, &AddX.y, AddX.w, AddX.h, 2, 256);
		if (!v6)
		{
			v6 = VRAM_CheckVramSlot(&AddX.x, &AddX.y, AddX.w, AddX.h, 2, 256);
			if (!v6)
				v5 = 0;
		}
	}
	objectTracker->vramBlock = v6;
	if (v6)
		v6->udata.streamUnit = (struct _StreamUnit*)objectTracker;
	return v5;
}


// autogenerated function stub: 
// void /*$ra*/ VRAM_InitMorphPalettes()
void VRAM_InitMorphPalettes()
{ // line 1511, offset 0x80074158
	/* begin block 1 */
		// Start line: 3502
	/* end block 1 */
	// End Line: 3503

	/* begin block 2 */
		// Start line: 3509
	/* end block 2 */
	// End Line: 3510

}


// autogenerated function stub: 
// void /*$ra*/ VRAM_UpdateMorphPalettes()
void VRAM_UpdateMorphPalettes()
{ // line 1545, offset 0x80074160
	/* begin block 1 */
		// Start line: 3570
	/* end block 1 */
	// End Line: 3571

	/* begin block 2 */
		// Start line: 3671
	/* end block 2 */
	// End Line: 3672

}


// autogenerated function stub: 
// void /*$ra*/ MORPH_ChangeAreaPalettes(long time /*$a0*/)
void MORPH_ChangeAreaPalettes(long time)
{ // line 1703, offset 0x80074168
	/* begin block 1 */
		// Start line: 3886
	/* end block 1 */
	// End Line: 3887

	/* begin block 2 */
		// Start line: 3912
	/* end block 2 */
	// End Line: 3913

}




