#include "CORE.H"
#include "SCRIPT.H"


// autogenerated function stub: 
// void /*$ra*/ SCRIPT_CombineEulerAngles(struct _Rotation *combinedRotation /*$s1*/, struct _Rotation *inputRotation1 /*$a1*/, struct _Rotation *inputRotation2 /*$s0*/)
void SCRIPT_CombineEulerAngles(struct _Rotation *combinedRotation, struct _Rotation *inputRotation1, struct _Rotation *inputRotation2)
{ // line 51, offset 0x8003c6b0
#if defined(PC_VERSION)
	__int16 y; // cx
	__int16 z; // dx
	struct _G2EulerAngles_Type euler; // [esp+0h] [ebp-48h] BYREF
	struct _G2Matrix_Type matrix; // [esp+8h] [ebp-40h] BYREF
	MATRIX v7; // [esp+28h] [ebp-20h] BYREF

	RotMatrix((SVECTOR*)inputRotation1, (MATRIX*)&matrix);
	RotMatrix((SVECTOR*)inputRotation2, &v7);
	MulMatrix2(&v7, (MATRIX*)&matrix);
	G2EulerAngles_FromMatrix(&euler, &matrix, 21);
	y = euler.y;
	combinedRotation->x = euler.x;
	z = euler.z;
	combinedRotation->y = y;
	combinedRotation->z = z;
#endif
}


// autogenerated function stub: 
// void /*$ra*/ SCRIPT_InstanceSplineInit(struct _Instance *instance /*$s2*/)
void SCRIPT_InstanceSplineInit(struct _Instance *instance)
{ // line 163, offset 0x8003c730
	/* begin block 1 */
		// Start line: 164
		// Start offset: 0x8003C730
		// Variables:
			struct Spline *spline; // $s3
			struct RSpline *rspline; // $a0
			struct Spline *sspline; // $s4
			struct MultiSpline *multi; // $s0
			struct SplineDef *sd; // $s5
			struct SplineDef *rsd; // $s1
			struct SplineDef *ssd; // $s6
			unsigned long isParent; // stack offset -40
			unsigned long isClass; // stack offset -36

		/* begin block 1.1 */
			// Start line: 187
			// Start offset: 0x8003C7C4
			// Variables:
				struct _G2Quat_Type *q; // $a0
				struct _G2EulerAngles_Type ea; // stack offset -80

			/* begin block 1.1.1 */
				// Start line: 195
				// Start offset: 0x8003C7EC
				// Variables:
					MATRIX introTransform; // stack offset -72
			/* end block 1.1.1 */
			// End offset: 0x8003C824
			// End Line: 204

			/* begin block 1.1.2 */
				// Start line: 209
				// Start offset: 0x8003C838
				// Variables:
					struct _Rotation combinedRotation; // stack offset -72

				/* begin block 1.1.2.1 */
					// Start line: 209
					// Start offset: 0x8003C838
					// Variables:
						short _x1; // $v0
						short _y1; // $v1
						short _z1; // $a0
				/* end block 1.1.2.1 */
				// End offset: 0x8003C890
				// End Line: 220
			/* end block 1.1.2 */
			// End offset: 0x8003C890
			// End Line: 221
		/* end block 1.1 */
		// End offset: 0x8003C890
		// End Line: 223

		/* begin block 1.2 */
			// Start line: 227
			// Start offset: 0x8003C898
			// Variables:
				struct _SVector *start_point; // $a3

			/* begin block 1.2.1 */
				// Start line: 235
				// Start offset: 0x8003C8BC
				// Variables:
					short _x0; // $v0
					short _y0; // $a0
					short _z0; // $v1
					//short _x1; // $a1
					//short _y1; // $a2
					//short _z1; // $a3
					struct _Position *_v; // $v0
					struct _Position *_v0; // $v1
			/* end block 1.2.1 */
			// End offset: 0x8003C8BC
			// End Line: 235
		/* end block 1.2 */
		// End offset: 0x8003C918
		// End Line: 244

		/* begin block 1.3 */
			// Start line: 248
			// Start offset: 0x8003C920
			// Variables:
				//struct _SVector *start_point; // $v1
		/* end block 1.3 */
		// End offset: 0x8003C958
		// End Line: 258
	/* end block 1 */
	// End offset: 0x8003C958
	// End Line: 259

	/* begin block 2 */
		// Start line: 326
	/* end block 2 */
	// End Line: 327

}


// autogenerated function stub: 
// short /*$ra*/ SCRIPTCountFramesInSpline(struct _Instance *instance /*$s4*/)
short SCRIPTCountFramesInSpline(struct _Instance *instance)
{ // line 266, offset 0x8003c980
	/* begin block 1 */
		// Start line: 267
		// Start offset: 0x8003C980
		// Variables:
			short kf; // $s3
			short frames; // $s2
			struct SplineKey *key; // $a0
			struct Spline *spline; // $s0
			struct RSpline *rspline; // $s1

		/* begin block 1.1 */
			// Start line: 282
			// Start offset: 0x8003CA0C
			// Variables:
				struct SplineRotKey *rkey; // $a0
		/* end block 1.1 */
		// End offset: 0x8003CA48
		// End Line: 288

		/* begin block 1.2 */
			// Start line: 291
			// Start offset: 0x8003CA50
			// Variables:
				struct MultiSpline *multi; // $v0
		/* end block 1.2 */
		// End offset: 0x8003CAA8
		// End Line: 300
	/* end block 1 */
	// End offset: 0x8003CAA8
	// End Line: 302

	/* begin block 2 */
		// Start line: 468
	/* end block 2 */
	// End Line: 469

	return 0;
}


// autogenerated function stub: 
// struct Spline * /*$ra*/ ScriptGetPosSpline(struct _Instance *instance /*$a0*/)
struct Spline * ScriptGetPosSpline(struct _Instance *instance)
{ // line 317, offset 0x8003cad0
	/* begin block 1 */
		// Start line: 318
		// Start offset: 0x8003CAD0
		// Variables:
			struct MultiSpline *multi; // $v0
	/* end block 1 */
	// End offset: 0x8003CAF8
	// End Line: 325

	/* begin block 2 */
		// Start line: 579
	/* end block 2 */
	// End Line: 580

	return null;
}


// autogenerated function stub: 
// struct RSpline * /*$ra*/ ScriptGetRotSpline(struct _Instance *instance /*$a0*/)
struct RSpline * ScriptGetRotSpline(struct _Instance *instance)
{ // line 326, offset 0x8003cb08
	/* begin block 1 */
		// Start line: 327
		// Start offset: 0x8003CB08
		// Variables:
			struct MultiSpline *multi; // $v0
	/* end block 1 */
	// End offset: 0x8003CB30
	// End Line: 334

	/* begin block 2 */
		// Start line: 598
	/* end block 2 */
	// End Line: 599

	return null;
}


// autogenerated function stub: 
// int /*$ra*/ SCRIPT_GetSplineFrameNumber(struct _Instance *instance /*$s0*/, struct SplineDef *splineDef /*$s1*/)
int SCRIPT_GetSplineFrameNumber(struct _Instance *instance, struct SplineDef *splineDef)
{ // line 338, offset 0x8003cb40
	/* begin block 1 */
		// Start line: 623
	/* end block 1 */
	// End Line: 624

	return 0;
}

struct MultiSpline * SCRIPT_GetMultiSpline(struct _Instance *instance, unsigned long *isParent, unsigned long *isClass)
{
	struct MultiSpline *multi;
	
	multi = NULL;

	if (instance != NULL)
	{
		*isParent = 0;

		if (isClass != NULL)
		{
			*isClass = 0;
		}

		if (instance != NULL)
		{
			if (instance->intro != NULL && instance->intro->multiSpline != NULL)
			{
				multi = instance->intro->multiSpline;
	
				if ((instance->flags & 0x100002) == 2 && isParent != NULL)
				{
					*isParent = 1;
				}

			}

			if (multi == NULL)
			{
				if (instance->object->modelList[0] != NULL)
				{
					multi = instance->object->modelList[0]->multiSpline;

					if (isClass != NULL)
					{
						*isClass = 1;
					}
				}
			}
		}
	}
	
	return multi;
}


// autogenerated function stub: 
// struct SplineDef * /*$ra*/ SCRIPT_GetPosSplineDef(struct _Instance *instance /*$a0*/, struct MultiSpline *multi /*$a1*/, unsigned long isParent /*$a2*/, unsigned long isClass /*$a3*/)
struct SplineDef * SCRIPT_GetPosSplineDef(struct _Instance *instance, struct MultiSpline *multi, unsigned long isParent, unsigned long isClass)
{ // line 376, offset 0x8003cc4c
	/* begin block 1 */
		// Start line: 377
		// Start offset: 0x8003CC4C
		// Variables:
			struct SplineDef *splineDef; // $v0
	/* end block 1 */
	// End offset: 0x8003CC70
	// End Line: 386

	/* begin block 2 */
		// Start line: 700
	/* end block 2 */
	// End Line: 701

	/* begin block 3 */
		// Start line: 702
	/* end block 3 */
	// End Line: 703

	return null;
}


// autogenerated function stub: 
// struct SplineDef * /*$ra*/ SCRIPT_GetRotSplineDef(struct _Instance *instance /*$a0*/, struct MultiSpline *multi /*$a1*/, unsigned long isParent /*$a2*/, unsigned long isClass /*$a3*/)
struct SplineDef * SCRIPT_GetRotSplineDef(struct _Instance *instance, struct MultiSpline *multi, unsigned long isParent, unsigned long isClass)
{ // line 388, offset 0x8003cc78
	/* begin block 1 */
		// Start line: 389
		// Start offset: 0x8003CC78
		// Variables:
			struct SplineDef *splineDef; // $v0
	/* end block 1 */
	// End offset: 0x8003CC9C
	// End Line: 398

	/* begin block 2 */
		// Start line: 724
	/* end block 2 */
	// End Line: 725

	/* begin block 3 */
		// Start line: 726
	/* end block 3 */
	// End Line: 727

	return null;
}


// autogenerated function stub: 
// struct SplineDef * /*$ra*/ SCRIPT_GetScaleSplineDef(struct _Instance *instance /*$a0*/, struct MultiSpline *multi /*$a1*/, unsigned long isParent /*$a2*/, unsigned long isClass /*$a3*/)
struct SplineDef * SCRIPT_GetScaleSplineDef(struct _Instance *instance, struct MultiSpline *multi, unsigned long isParent, unsigned long isClass)
{ // line 400, offset 0x8003cca4
	/* begin block 1 */
		// Start line: 401
		// Start offset: 0x8003CCA4
		// Variables:
			struct SplineDef *splineDef; // $v0
	/* end block 1 */
	// End offset: 0x8003CCC8
	// End Line: 410

	/* begin block 2 */
		// Start line: 748
	/* end block 2 */
	// End Line: 749

	/* begin block 3 */
		// Start line: 750
	/* end block 3 */
	// End Line: 751

	return null;
}


// autogenerated function stub: 
// void /*$ra*/ SCRIPT_RelativisticSpline(struct _Instance *instance /*$s0*/, struct _SVector *point /*$a3*/)
void SCRIPT_RelativisticSpline(struct _Instance *instance, struct _SVector *point)
{ // line 412, offset 0x8003ccd0
	/* begin block 1 */
		// Start line: 413
		// Start offset: 0x8003CCD0
		// Variables:
			struct _SVector pt; // stack offset -64

		/* begin block 1.1 */
			// Start line: 423
			// Start offset: 0x8003CD10
			// Variables:
				MATRIX segMatrix; // stack offset -56
				struct _Position newPt; // stack offset -24
				struct _Position localPt; // stack offset -16

			/* begin block 1.1.1 */
				// Start line: 426
				// Start offset: 0x8003CD10
				// Variables:
					short _x1; // $a1
					short _y1; // $v1
					short _z1; // $a0
					struct _SVector *_v0; // $v0
			/* end block 1.1.1 */
			// End offset: 0x8003CD10
			// End Line: 426

			/* begin block 1.1.2 */
				// Start line: 426
				// Start offset: 0x8003CD10
				// Variables:
					short _y0; // $v1
					short _z0; // $v0
					//short _x1; // $a1
					//short _y1; // $a3
					//short _z1; // $a2
					struct _Position *_v; // $a0
					//struct _Position *_v0; // $v0
					struct _Position *_v1; // $a2
			/* end block 1.1.2 */
			// End offset: 0x8003CD10
			// End Line: 426
		/* end block 1.1 */
		// End offset: 0x8003CD10
		// End Line: 426

		/* begin block 1.2 */
			// Start line: 440
			// Start offset: 0x8003CE78
			// Variables:
				short _x0; // $v0
				//short _y0; // $a0
				//short _z0; // $v1
				//short _x1; // $a1
				//short _y1; // $a2
				//short _z1; // $a3
				//struct _Position *_v; // $v0
				//struct _Position *_v0; // $v1
		/* end block 1.2 */
		// End offset: 0x8003CEB0
		// End Line: 440
	/* end block 1 */
	// End offset: 0x8003CEB0
	// End Line: 442

	/* begin block 2 */
		// Start line: 772
	/* end block 2 */
	// End Line: 773

}


// autogenerated function stub: 
// void /*$ra*/ SCRIPT_InstanceSplineSet(struct _Instance *instance /*$s2*/, short frameNum /*$fp*/, struct SplineDef *splineDef /*$s4*/, struct SplineDef *rsplineDef /*$s5*/, struct SplineDef *ssplineDef /*stack 16*/)
void SCRIPT_InstanceSplineSet(struct _Instance *instance, short frameNum, struct SplineDef *splineDef, struct SplineDef *rsplineDef, struct SplineDef *ssplineDef)
{ // line 444, offset 0x8003cec0
	/* begin block 1 */
		// Start line: 445
		// Start offset: 0x8003CEC0
		// Variables:
			struct Spline *spline; // $s0
			struct RSpline *rspline; // $s3
			struct Spline *sspline; // $s7
			struct MultiSpline *multi; // $s1
			unsigned long isClass; // stack offset -44
			unsigned long isParent; // stack offset -48
			struct _SVector point; // stack offset -96

		/* begin block 1.1 */
			// Start line: 506
			// Start offset: 0x8003D064
			// Variables:
				struct _G2Quat_Type q; // stack offset -88

			/* begin block 1.1.1 */
				// Start line: 509
				// Start offset: 0x8003D07C
				// Variables:
					MATRIX introTransform; // stack offset -80
			/* end block 1.1.1 */
			// End offset: 0x8003D098
			// End Line: 515
		/* end block 1.1 */
		// End offset: 0x8003D098
		// End Line: 515

		/* begin block 1.2 */
			// Start line: 523
			// Start offset: 0x8003D0BC
			// Variables:
				struct _Rotation rot; // stack offset -88

			/* begin block 1.2.1 */
				// Start line: 527
				// Start offset: 0x8003D0D0
				// Variables:
					struct _Rotation combinedRotation; // stack offset -80

				/* begin block 1.2.1.1 */
					// Start line: 527
					// Start offset: 0x8003D0D0
					// Variables:
						short _x1; // $v0
						short _y1; // $v1
						short _z1; // $a0
				/* end block 1.2.1.1 */
				// End offset: 0x8003D118
				// End Line: 537
			/* end block 1.2.1 */
			// End offset: 0x8003D118
			// End Line: 538
		/* end block 1.2 */
		// End offset: 0x8003D118
		// End Line: 540

		/* begin block 1.3 */
			// Start line: 544
			// Start offset: 0x8003D128
			// Variables:
				struct _SVector scale; // stack offset -88
		/* end block 1.3 */
		// End offset: 0x8003D168
		// End Line: 552
	/* end block 1 */
	// End offset: 0x8003D168
	// End Line: 554

	/* begin block 2 */
		// Start line: 840
	/* end block 2 */
	// End Line: 841

}


// autogenerated function stub: 
// long /*$ra*/ SCRIPT_SplineProcess(struct _Instance *instance /*$s4*/, struct MultiSpline *multi /*$fp*/, struct SplineDef *splineDef /*stack 8*/, struct SplineDef *rsplineDef /*$s7*/, struct SplineDef *ssplineDef /*stack 16*/, int direction /*stack 20*/, int isClass /*stack 24*/)
long SCRIPT_SplineProcess(struct _Instance *instance, struct MultiSpline *multi, struct SplineDef *splineDef, struct SplineDef *rsplineDef, struct SplineDef *ssplineDef, int direction, int isClass)
{ // line 556, offset 0x8003d198
	/* begin block 1 */
		// Start line: 557
		// Start offset: 0x8003D198
		// Variables:
			long retVal; // $s3
			struct Spline *spline; // $s5
			struct RSpline *rspline; // $s1
			struct Spline *sspline; // $a0
			struct _SVector *point; // $s2
			struct _Rotation rot; // stack offset -96
			long timeOff; // $s6

		/* begin block 1.1 */
			// Start line: 574
			// Start offset: 0x8003D1F4
			// Variables:
				struct _SVector pt; // stack offset -88
		/* end block 1.1 */
		// End offset: 0x8003D270
		// End Line: 594

		/* begin block 1.2 */
			// Start line: 617
			// Start offset: 0x8003D2DC
			// Variables:
				struct _G2Quat_Type q; // stack offset -80

			/* begin block 1.2.1 */
				// Start line: 620
				// Start offset: 0x8003D2F4
				// Variables:
					MATRIX introTransform; // stack offset -72
			/* end block 1.2.1 */
			// End offset: 0x8003D310
			// End Line: 626
		/* end block 1.2 */
		// End offset: 0x8003D334
		// End Line: 632

		/* begin block 1.3 */
			// Start line: 638
			// Start offset: 0x8003D348
			// Variables:
				struct _Rotation combinedRotation; // stack offset -72

			/* begin block 1.3.1 */
				// Start line: 638
				// Start offset: 0x8003D348
				// Variables:
					short _x1; // $v0
					short _y1; // $v1
					short _z1; // $a0
			/* end block 1.3.1 */
			// End offset: 0x8003D348
			// End Line: 638
		/* end block 1.3 */
		// End offset: 0x8003D348
		// End Line: 638

		/* begin block 1.4 */
			// Start line: 662
			// Start offset: 0x8003D3A0
			// Variables:
				//struct _SVector pt; // stack offset -80
		/* end block 1.4 */
		// End offset: 0x8003D44C
		// End Line: 687
	/* end block 1 */
	// End offset: 0x8003D44C
	// End Line: 688

	/* begin block 2 */
		// Start line: 1107
	/* end block 2 */
	// End Line: 1108

	return 0;
}


// autogenerated function stub: 
// long /*$ra*/ SCRIPT_InstanceSplineProcess(struct _Instance *instance /*$s4*/, struct SplineDef *splineDef /*$s3*/, struct SplineDef *rsplineDef /*$s2*/, struct SplineDef *ssplineDef /*$s0*/, int direction /*stack 16*/)
long SCRIPT_InstanceSplineProcess(struct _Instance *instance, struct SplineDef *splineDef, struct SplineDef *rsplineDef, struct SplineDef *ssplineDef, int direction)
{ // line 716, offset 0x8003d480
	/* begin block 1 */
		// Start line: 717
		// Start offset: 0x8003D480
		// Variables:
			struct MultiSpline *multi; // $s1
			unsigned long isClass; // stack offset -28
			unsigned long isParent; // stack offset -32
	/* end block 1 */
	// End offset: 0x8003D568
	// End Line: 747

	/* begin block 2 */
		// Start line: 1466
	/* end block 2 */
	// End Line: 1467

	return 0;
}


// autogenerated function stub: 
// void /*$ra*/ SCRIPT_FadeOutProcess(struct _Instance *instance /*$a0*/)
void SCRIPT_FadeOutProcess(struct _Instance *instance)
{ // line 1038, offset 0x8003d588
	/* begin block 1 */
		// Start line: 2076
	/* end block 1 */
	// End Line: 2077

	/* begin block 2 */
		// Start line: 1832
	/* end block 2 */
	// End Line: 1833

}


// autogenerated function stub: 
// void /*$ra*/ ScriptKillInstance(struct _Instance *instance /*$s2*/, int effect /*$s0*/)
void ScriptKillInstance(struct _Instance *instance, int effect)
{ // line 1046, offset 0x8003d5d0
	/* begin block 1 */
		// Start line: 1047
		// Start offset: 0x8003D5D0
		// Variables:
			struct Object *object; // $s1

		/* begin block 1.1 */
			// Start line: 1069
			// Start offset: 0x8003D65C
			// Variables:
				//struct Object *object; // $v0
		/* end block 1.1 */
		// End offset: 0x8003D67C
		// End Line: 1074

		/* begin block 1.2 */
			// Start line: 1080
			// Start offset: 0x8003D6A4
			// Variables:
				SVECTOR v; // stack offset -24
		/* end block 1.2 */
		// End offset: 0x8003D6E0
		// End Line: 1087

		/* begin block 1.3 */
			// Start line: 1093
			// Start offset: 0x8003D6E0
			// Variables:
				struct FXSplinter *splinterData; // $a0
				int facadeFlg; // $a1
				short shardFlags; // $a2

			/* begin block 1.3.1 */
				// Start line: 1100
				// Start offset: 0x8003D704
				// Variables:
					struct GenericTune *tune; // $v1
			/* end block 1.3.1 */
			// End offset: 0x8003D730
			// End Line: 1108
		/* end block 1.3 */
		// End offset: 0x8003D780
		// End Line: 1114
	/* end block 1 */
	// End offset: 0x8003D798
	// End Line: 1127

	/* begin block 2 */
		// Start line: 1848
	/* end block 2 */
	// End Line: 1849

}




