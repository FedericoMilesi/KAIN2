#define _CRT_SECURE_NO_WARNINGS

#include "CORE.H"
#include "CAMERA.H"
#include "GAMELOOP.H"
#include "GAMEPAD.H"
#include "SOUND.H"
#include "EVENT.H"

struct GameTracker gameTrackerX;
struct Camera theCamera;
struct _PrimPool primPool0, primPool1;
WORD word_C54F8C;

struct _InstanceList* instanceList; // offset 0x800D0C20
struct _InstancePool* instancePool; // offset 0x800D0C24

extern void (*DRAW_AnimatedModel_S)();
extern void (*DRAW_DisplayPolytopeList_S)();

// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_AllocStaticMemory()
void GAMELOOP_AllocStaticMemory()
{ // line 143, offset 0x8002d7c8
	/* begin block 1 */
		// Start line: 286
	/* end block 1 */
	// End Line: 287

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_InitGameTracker()
void GAMELOOP_InitGameTracker()
{ // line 189, offset 0x8002d8b8
	/* begin block 1 */
		// Start line: 190
		// Start offset: 0x8002D8B8

		/* begin block 1.1 */
			// Start line: 190
			// Start offset: 0x8002D8B8
			// Variables:
				int i; // $t4
		/* end block 1.1 */
		// End offset: 0x8002D990
		// End Line: 264
	/* end block 1 */
	// End offset: 0x8002D990
	// End Line: 270

	/* begin block 2 */
		// Start line: 412
	/* end block 2 */
	// End Line: 413

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_SystemInit(struct GameTracker *gameTracker /*$a0*/)
void GAMELOOP_SystemInit(struct GameTracker *gameTracker)
{ 
	GAMELOOP_AllocStaticMemory();
	INSTANCE_InitInstanceList(instanceList, instancePool);
	GAMELOOP_InitGameTracker();
}

void GAMELOOP_ResetGameStates()
{
	EVENT_Init();
}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_ClearGameTracker()
void GAMELOOP_ClearGameTracker()
{ // line 304, offset 0x8002da10
	/* begin block 1 */
		// Start line: 842
	/* end block 1 */
	// End Line: 843

	/* begin block 2 */
		// Start line: 853
	/* end block 2 */
	// End Line: 854

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_CalcGameTime()
void GAMELOOP_CalcGameTime()
{ // line 334, offset 0x8002da58
	/* begin block 1 */
		// Start line: 336
		// Start offset: 0x8002DA58
		// Variables:
			long time; // $a1
	/* end block 1 */
	// End offset: 0x8002DA58
	// End Line: 340

	/* begin block 2 */
		// Start line: 905
	/* end block 2 */
	// End Line: 906

	/* begin block 3 */
		// Start line: 918
	/* end block 3 */
	// End Line: 919

	/* begin block 4 */
		// Start line: 919
	/* end block 4 */
	// End Line: 920

	/* begin block 5 */
		// Start line: 923
	/* end block 5 */
	// End Line: 924

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_SetGameTime(long timeOfDay /*$a1*/)
void GAMELOOP_SetGameTime(long timeOfDay)
{ // line 345, offset 0x8002db04
	/* begin block 1 */
		// Start line: 346
		// Start offset: 0x8002DB04
		// Variables:
			long tim; // $v1
	/* end block 1 */
	// End offset: 0x8002DB5C
	// End Line: 352

	/* begin block 2 */
		// Start line: 942
	/* end block 2 */
	// End Line: 943

}


// autogenerated function stub: 
// int /*$ra*/ GAMELOOP_GetTimeOfDay()
int GAMELOOP_GetTimeOfDay()
{ // line 362, offset 0x8002db98
	/* begin block 1 */
		// Start line: 364
		// Start offset: 0x8002DB98
		// Variables:
			int timeOfDay; // $v1
	/* end block 1 */
	// End offset: 0x8002DBDC
	// End Line: 389

	/* begin block 2 */
		// Start line: 979
	/* end block 2 */
	// End Line: 980

	/* begin block 3 */
		// Start line: 980
	/* end block 3 */
	// End Line: 981

	/* begin block 4 */
		// Start line: 982
	/* end block 4 */
	// End Line: 983

	return 0;
}


// autogenerated function stub: 
// int /*$ra*/ GAMELOOP_GetTimeOfDayIdx(int timeOfDay /*$a0*/)
int GAMELOOP_GetTimeOfDayIdx(int timeOfDay)
{ // line 391, offset 0x8002dbe4
	/* begin block 1 */
		// Start line: 1047
	/* end block 1 */
	// End Line: 1048

	/* begin block 2 */
		// Start line: 1049
	/* end block 2 */
	// End Line: 1050

	return 0;
}


// autogenerated function stub: 
// int /*$ra*/ GAMELOOP_WaitForLoad()
int GAMELOOP_WaitForLoad()
{ // line 819, offset 0x8002dc28
	/* begin block 1 */
		// Start line: 1505
	/* end block 1 */
	// End Line: 1506

	/* begin block 2 */
		// Start line: 1913
	/* end block 2 */
	// End Line: 1914

	return 0;
}


// autogenerated function stub: 
// struct _StreamUnit * /*$ra*/ LoadLevels(char *baseAreaName /*$s2*/, struct GameTracker *gameTracker /*$s4*/)
struct _StreamUnit * LoadLevels(char *baseAreaName, struct GameTracker *gameTracker)
{ // line 836, offset 0x8002dc60
	/* begin block 1 */
		// Start line: 837
		// Start offset: 0x8002DC60
		// Variables:
			struct _SVector offset; // stack offset -32
			struct _StreamUnit *streamUnit; // $s0
			static char oldArea[16]; // offset 0xc
			int cd; // $s3

		/* begin block 1.1 */
			// Start line: 862
			// Start offset: 0x8002DCEC
			// Variables:
				int num; // $v0
				int waitFor; // $s1
		/* end block 1.1 */
		// End offset: 0x8002DD88
		// End Line: 897

		/* begin block 1.2 */
			// Start line: 928
			// Start offset: 0x8002DE24
			// Variables:
				short _x0; // $a2
				short _y0; // $a3
				short _z0; // $v0
				short _x1; // $v1
				short _y1; // $t1
				short _z1; // $t0
				struct _SVector *_v; // $a1
				struct _Position *_v0; // $v0
				struct _Position *_v1; // $t0
		/* end block 1.2 */
		// End offset: 0x8002DE24
		// End Line: 928
	/* end block 1 */
	// End offset: 0x8002DE24
	// End Line: 928

	/* begin block 2 */
		// Start line: 1947
	/* end block 2 */
	// End Line: 1948

	/* begin block 3 */
		// Start line: 1953
	/* end block 3 */
	// End Line: 1954

	return null;
}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_InitStandardObjects()
void GAMELOOP_InitStandardObjects()
{ // line 937, offset 0x8002debc
	/* begin block 1 */
		// Start line: 938
		// Start offset: 0x8002DEBC
		// Variables:
			static char (*sobjects[10]); // offset 0x0
			int i; // $s1
	/* end block 1 */
	// End offset: 0x8002DEFC
	// End Line: 953

	/* begin block 2 */
		// Start line: 2169
	/* end block 2 */
	// End Line: 2170

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_LevelLoadAndInit(char *baseAreaName /*$s0*/, struct GameTracker *gameTracker /*$s3*/)
void GAMELOOP_LevelLoadAndInit(char *baseAreaName, struct GameTracker *gameTracker)
{ // line 956, offset 0x8002df10
	/* begin block 1 */
		// Start line: 957
		// Start offset: 0x8002DF10
		// Variables:
			long i; // $s1
			struct _StreamUnit *streamUnit; // $s2

		/* begin block 1.1 */
			// Start line: 1035
			// Start offset: 0x8002E03C
			// Variables:
				short _x1; // $v0
				short _y1; // $a0
				short _z1; // $v1
				struct _Position *_v0; // $v0
				struct _Position *_v1; // $v1
		/* end block 1.1 */
		// End offset: 0x8002E03C
		// End Line: 1035
	/* end block 1 */
	// End offset: 0x8002E204
	// End Line: 1140

	/* begin block 2 */
		// Start line: 2211
	/* end block 2 */
	// End Line: 2212

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_StreamLevelLoadAndInit(char *baseAreaName /*$a0*/, struct GameTracker *gameTracker /*$a1*/, int toSignalNum /*$a2*/, int fromSignalNum /*$a3*/)
void GAMELOOP_StreamLevelLoadAndInit(char *baseAreaName, struct GameTracker *gameTracker, int toSignalNum, int fromSignalNum)
{ // line 1143, offset 0x8002e220
	/* begin block 1 */
		// Start line: 1144
		// Start offset: 0x8002E220
	/* end block 1 */
	// End offset: 0x8002E220
	// End Line: 1144

	/* begin block 2 */
		// Start line: 2613
	/* end block 2 */
	// End Line: 2614

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_SetScreenWipe(int time /*$a0*/, int maxTime /*$a1*/, int type /*$a2*/)
void GAMELOOP_SetScreenWipe(int time, int maxTime, int type)
{ // line 1162, offset 0x8002e240
	/* begin block 1 */
		// Start line: 2651
	/* end block 1 */
	// End Line: 2652

	/* begin block 2 */
		// Start line: 2652
	/* end block 2 */
	// End Line: 2653

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_HandleScreenWipes(unsigned long **drawot /*$s4*/)
void GAMELOOP_HandleScreenWipes(unsigned long **drawot)
{ // line 1170, offset 0x8002e254
	/* begin block 1 */
		// Start line: 1171
		// Start offset: 0x8002E254
		// Variables:
			long temp; // $s0
			struct _PrimPool *primPool; // $s3
	/* end block 1 */
	// End offset: 0x8002E694
	// End Line: 1519

	/* begin block 2 */
		// Start line: 2667
	/* end block 2 */
	// End Line: 2668

	/* begin block 3 */
		// Start line: 2682
	/* end block 3 */
	// End Line: 2683

}


// autogenerated function stub: 
// void /*$ra*/ UpdateFogSettings(struct _StreamUnit *currentUnit /*$s2*/, struct Level *level /*$s0*/)
void UpdateFogSettings(struct _StreamUnit *currentUnit, struct Level *level)
{ // line 1662, offset 0x8002e6b4
	/* begin block 1 */
		// Start line: 1663
		// Start offset: 0x8002E6B4
		// Variables:
			int changed; // $a2
			int setflag; // $s1
			int FogFar; // $a1
			int FogNear; // $a0
	/* end block 1 */
	// End offset: 0x8002E7C4
	// End Line: 1710

	/* begin block 2 */
		// Start line: 3668
	/* end block 2 */
	// End Line: 3669

}


// autogenerated function stub: 
// int /*$ra*/ CheckForNoBlend(struct _ColorType *Color /*$a0*/)
int CheckForNoBlend(struct _ColorType *Color)
{ // line 1712, offset 0x8002e7dc
	/* begin block 1 */
		// Start line: 3779
	/* end block 1 */
	// End Line: 3780

	/* begin block 2 */
		// Start line: 3780
	/* end block 2 */
	// End Line: 3781

	return 0;
}


// autogenerated function stub: 
// void /*$ra*/ BlendToColor(struct _ColorType *target /*$s1*/, struct _ColorType *current /*$a1*/, struct _ColorType *dest /*$s0*/)
void BlendToColor(struct _ColorType *target, struct _ColorType *current, struct _ColorType *dest)
{ // line 1722, offset 0x8002e824
	/* begin block 1 */
		// Start line: 3799
	/* end block 1 */
	// End Line: 3800

}


// autogenerated function stub: 
// void /*$ra*/ MainRenderLevel(struct _StreamUnit *currentUnit /*$s7*/, unsigned long **drawot /*$fp*/)
void MainRenderLevel(struct _StreamUnit *currentUnit, unsigned long **drawot)
{ // line 1739, offset 0x8002e918
	/* begin block 1 */
		// Start line: 1740
		// Start offset: 0x8002E918
		// Variables:
			struct Level *level; // $s0
			struct GameTracker *gameTracker; // $s5
			struct _Terrain *terrain; // $s4
			int curTree; // $s1
			long BackColor; // stack offset -48
			struct _Position cam_pos_save; // stack offset -96
			//struct MATRIX cam_mat_save; // stack offset -88
			struct _Instance *saveLightInstance; // $s2

		/* begin block 1.1 */
			// Start line: 1792
			// Start offset: 0x8002E9E8
			// Variables:
				int time; // $a2
		/* end block 1.1 */
		// End offset: 0x8002EA1C
		// End Line: 1798

		/* begin block 1.2 */
			// Start line: 1806
			// Start offset: 0x8002EA68
			// Variables:
				int tod; // $v1
		/* end block 1.2 */
		// End offset: 0x8002EAE4
		// End Line: 1820

		/* begin block 1.3 */
			// Start line: 1898
			// Start offset: 0x8002EC00
			// Variables:
				struct _SVector tmp; // stack offset -56
				struct BSPTree *bsp; // $s0
		/* end block 1.3 */
		// End offset: 0x8002ECF8
		// End Line: 1955
	/* end block 1 */
	// End offset: 0x8002EDDC
	// End Line: 1975

	/* begin block 2 */
		// Start line: 3834
	/* end block 2 */
	// End Line: 3835

}


// autogenerated function stub: 
// void /*$ra*/ StreamIntroInstancesForUnit(struct _StreamUnit *currentUnit /*$a1*/)
void StreamIntroInstancesForUnit(struct _StreamUnit *currentUnit)
{ // line 1982, offset 0x8002ee18
	/* begin block 1 */
		// Start line: 1983
		// Start offset: 0x8002EE18
	/* end block 1 */
	// End offset: 0x8002EE48
	// End Line: 1995

	/* begin block 2 */
		// Start line: 4500
	/* end block 2 */
	// End Line: 4501

}


// autogenerated function stub: 
// long /*$ra*/ StreamRenderLevel(struct _StreamUnit *currentUnit /*$s7*/, struct Level *mainLevel /*$a1*/, unsigned long **drawot /*$s6*/, long portalFogColor /*$s0*/)
long StreamRenderLevel(struct _StreamUnit *currentUnit, struct Level *mainLevel, unsigned long **drawot, long portalFogColor)
{ // line 1999, offset 0x8002ee58
	/* begin block 1 */
		// Start line: 2000
		// Start offset: 0x8002EE58
		// Variables:
			struct GameTracker *gameTracker; // $s4
			struct Level *level; // $s1
			struct _Terrain *terrain; // $s2
			int curTree; // $s1
			int farplanesave; // $fp
			struct _Position cam_pos_save; // stack offset -88
			//struct MATRIX cam_mat_save; // stack offset -80

		/* begin block 1.1 */
			// Start line: 2085
			// Start offset: 0x8002EFBC
			// Variables:
				struct _SVector tmp; // stack offset -48
				struct BSPTree *bsp; // $s0
		/* end block 1.1 */
		// End offset: 0x8002F088
		// End Line: 2133

		/* begin block 1.2 */
			// Start line: 2151
			// Start offset: 0x8002F134
		/* end block 1.2 */
		// End offset: 0x8002F168
		// End Line: 2161
	/* end block 1 */
	// End offset: 0x8002F168
	// End Line: 2163

	/* begin block 2 */
		// Start line: 4534
	/* end block 2 */
	// End Line: 4535

	return 0;
}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_FlipScreenAndDraw(struct GameTracker *gameTracker /*$s0*/, unsigned long **drawot /*$a1*/)
void GAMELOOP_FlipScreenAndDraw(struct GameTracker *gameTracker, unsigned long **drawot)
{ // line 2187, offset 0x8002f1a0
#if defined(PC_VERSION)
	unsigned int** dispOT; // ecx
	struct _PrimPool* v3; // eax

	DrawOTag((u_long*)drawot + 3071);
	dispOT = gameTrackerX.dispOT;
	gameTrackerX.dispOT = gameTrackerX.drawOT;
	gameTrackerX.drawOT = dispOT;
	gameTrackerX.drawPage = 1 - gameTrackerX.drawPage;
	ClearOTagR((u_long*)dispOT, 3072);
	if ((gameTrackerX.gameFlags & 0x8000000) != 0)
	{
		if (gameTrackerX.drawPage)
			gameTrackerX.primPool->nextPrim = &gameTrackerX.primPool->prim[16500];
		else
			gameTrackerX.primPool->nextPrim = &gameTrackerX.primPool->prim[9000];
		gameTrackerX.primPool->numPrims = 0;
	}
	else
	{
		v3 = &primPool0;
		if (gameTrackerX.primPool == &primPool0)
			v3 = &primPool1;
		gameTrackerX.primPool = v3;
		v3->nextPrim = v3->prim;
		gameTrackerX.primPool->numPrims = 0;
	}
	RenderG2_Swap();
	RenderG2_Clear(gameTracker, drawot);
#endif
}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_AddClearPrim(unsigned long **drawot /*$a3*/, int override /*$a1*/)
void GAMELOOP_AddClearPrim(unsigned long **drawot, int override)
{ // line 2219, offset 0x8002f254
	/* begin block 1 */
		// Start line: 2220
		// Start offset: 0x8002F254

		/* begin block 1.1 */
			// Start line: 2224
			// Start offset: 0x8002F270
			// Variables:
				struct BLK_FILL *blkfill; // $a0
		/* end block 1.1 */
		// End offset: 0x8002F270
		// End Line: 2224

		/* begin block 1.2 */
			// Start line: 2240
			// Start offset: 0x8002F2DC
			// Variables:
				//struct BLK_FILL *blkfill; // $v1
		/* end block 1.2 */
		// End offset: 0x8002F2F4
		// End Line: 2242
	/* end block 1 */
	// End offset: 0x8002F2F4
	// End Line: 2243

	/* begin block 2 */
		// Start line: 5138
	/* end block 2 */
	// End Line: 5139

	/* begin block 3 */
		// Start line: 5140
	/* end block 3 */
	// End Line: 5141

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_SwitchTheDrawBuffer(unsigned long **drawot /*$a0*/)
void GAMELOOP_SwitchTheDrawBuffer(unsigned long **drawot)
{ // line 2245, offset 0x8002f2fc
	/* begin block 1 */
		// Start line: 5209
	/* end block 1 */
	// End Line: 5210

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_SetupRenderFunction(struct GameTracker *gameTracker /*$a0*/)
void GAMELOOP_SetupRenderFunction(struct GameTracker *gameTracker)
{ // line 2277, offset 0x8002f37c
#if defined(PC_VERSION)
	gameTracker->drawAnimatedModelFunc = DRAW_AnimatedModel_S;
	gameTracker->drawDisplayPolytopeListFunc = DRAW_DisplayPolytopeList_S;
#endif
}


// autogenerated function stub: 
// struct _StreamUnit * /*$ra*/ GAMELOOP_GetMainRenderUnit()
struct _StreamUnit * GAMELOOP_GetMainRenderUnit()
{ // line 2303, offset 0x8002f398
#if defined(PC_VERSION)
	struct _Instance* focusInstance; // edi
	struct _StreamUnit* StreamUnitWithID; // esi
	struct _StreamUnit* v3; // eax

	if (theCamera.mode == 5)
		return (struct _StreamUnit*)STREAM_WhichUnitPointerIsIn(theCamera.data.Cinematic.posSpline);
	focusInstance = theCamera.focusInstance;
	if (theCamera.focusInstance == gameTrackerX.playerInstance && gameTrackerX.SwitchToNewStreamUnit)
	{
		StreamUnitWithID = STREAM_GetStreamUnitWithID(gameTrackerX.moveRazielToStreamID);
		if (!StreamUnitWithID)
			return STREAM_GetStreamUnitWithID(focusInstance->currentStreamUnitID);
	}
	else
	{
		StreamUnitWithID = STREAM_GetStreamUnitWithID(theCamera.focusInstance->currentStreamUnitID);
	}
	v3 = COLLIDE_CameraWithStreamSignals(&theCamera);
	if (v3)
		return v3;
	return StreamUnitWithID;
#else
	return NULL;
#endif
}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_DisplayFrame(struct GameTracker *gameTracker /*stack 0*/)
void GAMELOOP_DisplayFrame(struct GameTracker *gameTracker)
{ // line 2355, offset 0x8002f458
	/* begin block 1 */
		// Start line: 2356
		// Start offset: 0x8002F458
		// Variables:
			unsigned long **drawot; // stack offset -64
			struct Level *mainLevel; // stack offset -60
			struct StreamUnitPortal *streamPortal; // stack offset -56
			int numportals; // stack offset -52
			int d; // $s6
			struct _StreamUnit *mainStreamUnit; // $fp
			void *savedNextPrim; // stack offset -48

		/* begin block 1.1 */
			// Start line: 2467
			// Start offset: 0x8002F6D0
			// Variables:
				struct _StreamUnit *toStreamUnit; // $s2
				long toStreamUnitID; // stack offset -44
				struct StreamUnitPortal *streamPortal2; // $s4
				int i; // $s5
				int draw; // $s3
				//struct PSX_RECT cliprect; // stack offset -72

			/* begin block 1.1.1 */
				// Start line: 2508
				// Start offset: 0x8002F7B4
				// Variables:
					int streamID; // $s0
					struct _Instance *instance; // $v0
			/* end block 1.1.1 */
			// End offset: 0x8002F810
			// End Line: 2518
		/* end block 1.1 */
		// End offset: 0x8002F994
		// End Line: 2587
	/* end block 1 */
	// End offset: 0x8002FBF0
	// End Line: 2704

	/* begin block 2 */
		// Start line: 5433
	/* end block 2 */
	// End Line: 5434

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_DrawSavedOT(unsigned long **newOT /*$t3*/)
void GAMELOOP_DrawSavedOT(unsigned long **newOT)
{ // line 2710, offset 0x8002fc20
	/* begin block 1 */
		// Start line: 2711
		// Start offset: 0x8002FC20
		// Variables:
			struct P_TAG *tag; // $a1
			int y; // $a2

		/* begin block 1.1 */
			// Start line: 2719
			// Start offset: 0x8002FC84
			// Variables:
				int tpage; // $v1
		/* end block 1.1 */
		// End offset: 0x8002FCAC
		// End Line: 2727

		/* begin block 1.2 */
			// Start line: 2732
			// Start offset: 0x8002FCC0
			// Variables:
				//int tpage; // $v1
		/* end block 1.2 */
		// End offset: 0x8002FCE8
		// End Line: 2740

		/* begin block 1.3 */
			// Start line: 2745
			// Start offset: 0x8002FCFC
		/* end block 1.3 */
		// End offset: 0x8002FD30
		// End Line: 2756
	/* end block 1 */
	// End offset: 0x8002FD54
	// End Line: 2759

	/* begin block 2 */
		// Start line: 6396
	/* end block 2 */
	// End Line: 6397

}


// autogenerated function stub: 
// void /*$ra*/ ResetPrimPool()
void ResetPrimPool()
{ // line 2764, offset 0x8002fd98
	
#if defined(PC_VERSION)
	unsigned int** dispOT; // ecx
	struct _PrimPool* v1; // eax

	dispOT = gameTrackerX.dispOT;
	gameTrackerX.dispOT = gameTrackerX.drawOT;
	gameTrackerX.drawOT = dispOT;
	gameTrackerX.drawPage = 1 - gameTrackerX.drawPage;
	ClearOTagR((u_long*)dispOT, 3072);
	if ((gameTrackerX.gameFlags & 0x8000000) != 0)
	{
		if (gameTrackerX.drawPage)
			gameTrackerX.primPool->nextPrim = &gameTrackerX.primPool->prim[16500];
		else
			gameTrackerX.primPool->nextPrim = &gameTrackerX.primPool->prim[9000];
		gameTrackerX.primPool->numPrims = 0;
	}
	else
	{
		v1 = &primPool0;
		if (gameTrackerX.primPool == &primPool0)
			v1 = &primPool1;
		gameTrackerX.primPool = v1;
		v1->nextPrim = v1->prim;
		gameTrackerX.primPool->numPrims = 0;
	}
#endif
}


// autogenerated function stub: 
// void /*$ra*/ Switch_For_Redraw()
void Switch_For_Redraw()
{ // line 2793, offset 0x8002fe44
	/* begin block 1 */
		// Start line: 2795
		// Start offset: 0x8002FE44
		// Variables:
			unsigned long **temp; // $v1
	/* end block 1 */
	// End offset: 0x8002FEA4
	// End Line: 2820

	/* begin block 2 */
		// Start line: 6612
	/* end block 2 */
	// End Line: 6613

	/* begin block 3 */
		// Start line: 6613
	/* end block 3 */
	// End Line: 6614

	/* begin block 4 */
		// Start line: 6616
	/* end block 4 */
	// End Line: 6617

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_Set_Pause_Redraw()
void GAMELOOP_Set_Pause_Redraw()
{ // line 2824, offset 0x8002fec0
	word_C54F8C = 1;
}


// autogenerated function stub: 
// void /*$ra*/ SaveOT()
void SaveOT()
{ // line 2829, offset 0x8002fed0
	/* begin block 1 */
		// Start line: 2830
		// Start offset: 0x8002FED0
		// Variables:
			struct P_TAG *tag; // $a0
			struct P_TAG *last; // $s0
			struct P_TAG *lastlast; // $s1
	/* end block 1 */
	// End offset: 0x8003005C
	// End Line: 2880

	/* begin block 2 */
		// Start line: 6687
	/* end block 2 */
	// End Line: 6688

}


// autogenerated function stub: 
// void /*$ra*/ ResetDrawPage()
void ResetDrawPage()
{ // line 2882, offset 0x80030070
	/* begin block 1 */
		// Start line: 2883
		// Start offset: 0x80030070

		/* begin block 1.1 */
			// Start line: 2883
			// Start offset: 0x80030070
			// Variables:
				unsigned long **temp; // $v0
		/* end block 1.1 */
		// End offset: 0x80030070
		// End Line: 2883
	/* end block 1 */
	// End offset: 0x80030070
	// End Line: 2883

	/* begin block 2 */
		// Start line: 6813
	/* end block 2 */
	// End Line: 6814

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_Set24FPS()
void GAMELOOP_Set24FPS()
{ // line 2914, offset 0x800300b0
	gameTrackerX.frameRate24fps = 1;
}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_Reset24FPS()
void GAMELOOP_Reset24FPS()
{ // line 2920, offset 0x800300c0
	gameTrackerX.frameRate24fps = 0;
}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_DoTimeProcess()
void GAMELOOP_DoTimeProcess()
{ // line 2925, offset 0x800300cc
	
#if defined(PC_VERSION)
	unsigned int TimeMS; // ebx
	int frameRateLock; // eax
	unsigned int lastLoopTime; // ecx
	unsigned int timeSinceLastGameFrame; // eax
	unsigned int fps30Count; // ecx

	TimeMS = TIMER_GetTimeMS();
	if ((gameTrackerX.gameFlags & 0x10000000) != 0)
	{
		gameTrackerX.lastLoopTime = -1;
		goto LABEL_27;
	}
	gameTrackerX.totalTime = D3D_TimeDiff(gameTrackerX.currentTicks);
	gameTrackerX.currentTicks = D3D_CurrentTime();
	frameRateLock = gameTrackerX.frameRateLock;
	if (gameTrackerX.frameRateLock < 1)
	{
		frameRateLock = 1;
		gameTrackerX.frameRateLock = 1;
	}
	if (frameRateLock > 2)
	{
		frameRateLock = 2;
		gameTrackerX.frameRateLock = 2;
	}
	if (gameTrackerX.decoupleGame && (gameTrackerX.gameFlags & 0x10000000) == 0)
	{
		lastLoopTime = 33;
		if (frameRateLock == 2)
			lastLoopTime = 50;
		if (gameTrackerX.gameData.asmData.MorphTime != 1000)
			lastLoopTime = 15;
		if (gameTrackerX.lastLoopTime != -1)
			lastLoopTime = TimeMS - gameTrackerX.currentTime;
		if (lastLoopTime > 0x42)
		{
			lastLoopTime = 66;
			gameTrackerX.lastLoopTime = 66;
			goto LABEL_22;
		}
		goto LABEL_20;
	}
	if (frameRateLock == 1)
	{
		lastLoopTime = 33;
		gameTrackerX.lastLoopTime = 33;
		goto LABEL_22;
	}
	if (frameRateLock == 2)
	{
		lastLoopTime = 50;
	LABEL_20:
		gameTrackerX.lastLoopTime = lastLoopTime;
		goto LABEL_22;
	}
	lastLoopTime = gameTrackerX.lastLoopTime;
LABEL_22:
	gameTrackerX.gameFramePassed = 0;
	gameTrackerX.timeMult = (lastLoopTime << 12) / 0x21;
	gameTrackerX.globalTimeMult = (lastLoopTime << 12) / 0x21;
	gameTrackerX.timeSinceLastGameFrame += (lastLoopTime << 12) / 0x21;
	timeSinceLastGameFrame = gameTrackerX.timeSinceLastGameFrame;
	if (gameTrackerX.timeSinceLastGameFrame <= 0x1000)
	{
	LABEL_27:
		gameTrackerX.currentTime = TimeMS;
		return;
	}
	fps30Count = gameTrackerX.fps30Count;
	do
	{
		timeSinceLastGameFrame -= 4096;
		++fps30Count;
		gameTrackerX.gameFramePassed = 1;
	} while (timeSinceLastGameFrame > 0x1000);
	gameTrackerX.fps30Count = fps30Count;
	gameTrackerX.timeSinceLastGameFrame = timeSinceLastGameFrame;
	gameTrackerX.currentTime = TimeMS;
#endif
}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_Process(struct GameTracker *gameTracker /*$s5*/)
void GAMELOOP_Process(struct GameTracker *gameTracker)
{ // line 3021, offset 0x800302d0
	/* begin block 1 */
		// Start line: 3022
		// Start offset: 0x800302D0
		// Variables:
			int d; // $s2

		/* begin block 1.1 */
			// Start line: 3064
			// Start offset: 0x80030378
			// Variables:
				int useTime; // $s0

			/* begin block 1.1.1 */
				// Start line: 3067
				// Start offset: 0x80030388
				// Variables:
					struct Level *level; // $v0
			/* end block 1.1.1 */
			// End offset: 0x800303AC
			// End Line: 3072
		/* end block 1.1 */
		// End offset: 0x800303DC
		// End Line: 3077

		/* begin block 1.2 */
			// Start line: 3184
			// Start offset: 0x8003057C
			// Variables:
				int i; // $s0

			/* begin block 1.2.1 */
				// Start line: 3191
				// Start offset: 0x800305A8
				// Variables:
					struct _SFXMkr *sfxMkr; // $a2
			/* end block 1.2.1 */
			// End offset: 0x800305FC
			// End Line: 3203
		/* end block 1.2 */
		// End offset: 0x80030624
		// End Line: 3205
	/* end block 1 */
	// End offset: 0x800308F8
	// End Line: 3407

	/* begin block 2 */
		// Start line: 7120
	/* end block 2 */
	// End Line: 7121

	/* begin block 3 */
		// Start line: 7129
	/* end block 3 */
	// End Line: 7130

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_ModeStartRunning()
void GAMELOOP_ModeStartRunning()
{ // line 3411, offset 0x80030920
	/* begin block 1 */
		// Start line: 7987
	/* end block 1 */
	// End Line: 7988

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_ModeStartPause()
void GAMELOOP_ModeStartPause()
{ // line 3441, offset 0x800309f8
	/* begin block 1 */
		// Start line: 8050
	/* end block 1 */
	// End Line: 8051

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_ChangeMode()
void GAMELOOP_ChangeMode()
{ // line 3493, offset 0x80030ad0
	/* begin block 1 */
		// Start line: 3494
		// Start offset: 0x80030AD0
		// Variables:
			long *controlCommand; // $s0
	/* end block 1 */
	// End offset: 0x80030E6C
	// End Line: 3661

	/* begin block 2 */
		// Start line: 6986
	/* end block 2 */
	// End Line: 6987

}


// autogenerated function stub: 
// void /*$ra*/ GAMELOOP_RequestLevelChange(char *name /*$s2*/, short number /*$a1*/, struct GameTracker *gameTracker /*$s0*/)
void GAMELOOP_RequestLevelChange(char *name, short number, struct GameTracker *gameTracker)
{ // line 3664, offset 0x80030e7c
	if (!gameTracker->levelChange)
	{
		gameTracker->gameFlags |= 1u;
		SOUND_ResetAllSound();
		sprintf(gameTracker->baseAreaName, "%s%d", name, number);
		gameTracker->levelChange = 1;
		gameTracker->levelDone = 1;
	}
}


// autogenerated function stub: 
// void /*$ra*/ PSX_GameLoop(struct GameTracker *gameTracker /*$s0*/)
void PSX_GameLoop(struct GameTracker *gameTracker)
{ // line 3686, offset 0x80030efc
	GAMEPAD_Process(gameTracker);
	GAMELOOP_Process(gameTracker);
}


// autogenerated function stub: 
// struct MATRIX * /*$ra*/ GAMELOOP_GetMatrices(int numMatrices /*$a0*/)
MATRIX * GAMELOOP_GetMatrices(int numMatrices)
{ // line 3696, offset 0x80030f28
#if defined(PC_VERSION)
	MATRIX* result; // eax
	u_long* v2; // edx

	result = (struct MATRIX*)gameTrackerX.primPool->nextPrim;
	v2 = (u_long*)&result[numMatrices];
	if (v2 >= gameTrackerX.primPool->lastPrim)
		return 0;
	gameTrackerX.primPool->nextPrim = v2;
	return result;
#else
	return NULL;
#endif
}


// autogenerated function stub: 
// struct GameTracker * /*$ra*/ GAMELOOP_GetGT()
struct GameTracker * GAMELOOP_GetGT()
{ // line 3720, offset 0x80030f5c
	return &gameTrackerX;
}




