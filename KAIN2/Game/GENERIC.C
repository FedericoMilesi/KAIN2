#include "CORE.H"
#include "GENERIC.H"


// autogenerated function stub: 
// void /*$ra*/ GenericInit(struct _Instance *instance /*$s0*/, struct GameTracker *gameTracker /*$a1*/)
void GenericInit(struct _Instance *instance, struct GameTracker *gameTracker)
{ // line 28, offset 0x8003e194
#if defined(PC_VERSION)
	Spline* positional; // ecx
	struct Intro* intro; // eax
	struct Object* object; // edi
	struct MultiSpline* multiSpline; // eax
	char* name; // edi

	positional = 0;
	intro = instance->intro;
	object = instance->object;
	if (intro)
	{
		multiSpline = intro->multiSpline;
		if (multiSpline)
			positional = multiSpline->positional;
	}
	if (!positional)
	{
		instance->zAccl = -10;
		instance->maxXVel = 100;
		instance->maxYVel = 100;
		instance->maxZVel = 100;
	}
	if (object)
	{
		if (object->numAnims)
		{
			if ((object->oflags2 & 0x40000000) == 0)
			{
				G2EmulationInstanceSetTotalSections(instance, 1);
				G2EmulationInstanceSetStartAndEndSegment(
					instance,
					0,
					0,
					LOWORD(object->modelList[instance->currentModel]->numSegments) - 1);
				G2EmulationInstanceSetAnimation(instance, 0, 0, 0, 0);
				G2EmulationInstanceSetMode(instance, 0, 0);
				name = object->name;
				if (strcmp(name, "ariel___") == 0)
					G2AnimSection_SetInterpInfo(instance->anim.section, &stru_C55028);
			}
		}
	}
#else
	UNIMPLEMENTED();
#endif
}

void GenericCollide(struct _Instance* instance, struct GameTracker* gameTracker)
{
}


// autogenerated function stub: 
// void /*$ra*/ GenericProcess(struct _Instance *instance /*$a0*/, struct GameTracker *gameTracker /*$a1*/)
void GenericProcess(struct _Instance *instance, struct GameTracker *gameTracker)
{ // line 134, offset 0x8003e2d8
	/* begin block 1 */
		// Start line: 135
		// Start offset: 0x8003E2D8
		// Variables:
			struct Object *object; // $v1
	/* end block 1 */
	// End offset: 0x8003E31C
	// End Line: 144

	/* begin block 2 */
		// Start line: 271
	/* end block 2 */
	// End Line: 272
			UNIMPLEMENTED();
}


// autogenerated function stub: 
// unsigned long /*$ra*/ GenericQuery(struct _Instance *instance /*$s0*/, unsigned long query /*$a1*/)
unsigned long GenericQuery(struct _Instance *instance, unsigned long query)
{ // line 149, offset 0x8003e32c
	/* begin block 1 */
		// Start line: 150
		// Start offset: 0x8003E32C
		// Variables:
			long ret; // $a0

		/* begin block 1.1 */
			// Start line: 181
			// Start offset: 0x8003E400
			// Variables:
				struct evControlSaveDataData *pdata; // $v0
		/* end block 1.1 */
		// End offset: 0x8003E440
		// End Line: 191

		/* begin block 1.2 */
			// Start line: 195
			// Start offset: 0x8003E440
			// Variables:
				struct Object *object; // $a0
		/* end block 1.2 */
		// End offset: 0x8003E484
		// End Line: 203
	/* end block 1 */
	// End offset: 0x8003E490
	// End Line: 216

	/* begin block 2 */
		// Start line: 301
	/* end block 2 */
	// End Line: 302
				UNIMPLEMENTED();
	return 0;
}


// autogenerated function stub: 
// void /*$ra*/ GenericMessage(struct _Instance *instance /*$s0*/, unsigned long message /*$a1*/, unsigned long data /*$v1*/)
void GenericMessage(struct _Instance *instance, unsigned long message, unsigned long data)
{ // line 222, offset 0x8003e4a4
	/* begin block 1 */
		// Start line: 223
		// Start offset: 0x8003E4A4

		/* begin block 1.1 */
			// Start line: 228
			// Start offset: 0x8003E538
			// Variables:
				struct evAnimationInstanceSwitchData *Ptr; // $s1
		/* end block 1.1 */
		// End offset: 0x8003E588
		// End Line: 239

		/* begin block 1.2 */
			// Start line: 245
			// Start offset: 0x8003E598
		/* end block 1.2 */
		// End offset: 0x8003E598
		// End Line: 246

		/* begin block 1.3 */
			// Start line: 260
			// Start offset: 0x8003E5E4
		/* end block 1.3 */
		// End offset: 0x8003E60C
		// End Line: 268
	/* end block 1 */
	// End offset: 0x8003E60C
	// End Line: 275

	/* begin block 2 */
		// Start line: 453
	/* end block 2 */
	// End Line: 454
				UNIMPLEMENTED();
}

void GenericRelocateTune(struct Object* object, long offset)
{
	struct GenericTune* tune;

	tune = (struct GenericTune*)object->modelList;

	if (tune != NULL && tune->shatterData != NULL)
	{
		tune->shatterData = (char*)tune->shatterData + offset;
	}
}