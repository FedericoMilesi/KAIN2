#include "SCRIPT2.H"

// PROTOTYPE CODE
// this is on pc but doesn't exist on psx at all

void UpdraftInit(struct _Instance* a1)
{
#if defined(PC_VERSION)
	a1->currentMainState = 0;
#endif
}

void UpdraftProcess(struct _Instance* a1)
{
#if defined(PC_VERSION)
	if (a1->currentMainState == 1)
		a1->currentMainState = 0;
#endif
}

void UpdraftCollide(struct _Instance* a1, struct GameTracker* a2)
{
#if defined(PC_VERSION)
	BYTE* collideInfo; // eax

	collideInfo = a1->collideInfo;
	if (collideInfo[7] == 1 && (struct _Instance*)*((DWORD*)collideInfo + 5) == a2->playerInstance)
		a1->currentMainState = 1;
#endif
}

// autogenerated function stub: 
// void /*$ra*/ LitShaftInit(struct _Instance *instance /*$s1*/, struct GameTracker *gameTracker /*$a1*/)
void LitShaftInit(struct _Instance *instance, struct GameTracker *gameTracker)
{ // line 127, offset 0x8005eee0
#if defined(PC_VERSION)
	struct LitShaftProperties* data; // esi
	int TimeOfDay; // eax
	int v4; // eax

	data = (struct LitShaftProperties*)instance->data;
	if (data)
	{
		TimeOfDay = GAMELOOP_GetTimeOfDay();
		if (TimeOfDay > 700)
		{
			v4 = TimeOfDay - 1800;
			if (v4)
			{
				if (v4 != 100)
					return;
				goto LABEL_8;
			}
		}
		else if (TimeOfDay != 700)
		{
			if (TimeOfDay != 600)
				return;
		LABEL_8:
			instance->fadeValue = 4096;
			return;
		}
		instance->fadeValue = data->fadeValue;
	}
#endif
}


// autogenerated function stub: 
// short /*$ra*/ LitShaft_GetFadeValue(struct _Instance *instance /*$a0*/)
short LitShaft_GetFadeValue(struct _Instance *instance)
{ // line 149, offset 0x8005ef70
#if defined(PC_VERSION)
	struct LitShaftProperties* data; // eax

	data = (struct LitShaftProperties*)instance->data;
	if (data)
		return data->fadeValue;
	else
		return 0;
#else
	return 0;
#endif
}
